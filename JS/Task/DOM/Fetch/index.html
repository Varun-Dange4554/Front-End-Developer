<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
     *{
        padding: 0;
        margin: 0;
        box-sizing: border-box;
        font-family: sans-serif;
        color: #333;
        /* text-align: center; */
     }
     h1{
        font-size: 2rem;
        margin-bottom: 1rem;
        text-align: center;
        
     }
     .productSection{
        padding: 20px;
        background-color: #f9f9f9;
        border: 1px solid #eee;
        border-radius: 5px;
        margin: 20px 0px;
     }
     .productRow{
        display: grid;
        grid-template-columns: 20% auto;
        gap: 20px;

     }
     .productRow aside{
        padding: 15px;
        box-shadow: 0px 0px 10px 2px #ccc;

     }
     .productRow aside ul {
        list-style: none;
        padding: 0;
        margin-top: 20px;
     }
     .productRow aside ul li{
       padding: 7px;
        cursor: pointer;
        color: #007bff;
     }
     .productList{
        padding: 20px;
        box-shadow: 0px 0px 10px 2px #ccc;

     }
     .products{
        display: grid;
         grid-template-columns: repeat(4,1fr);
        margin-top: 20px;
        gap: 20px;
     }
     .productitem{
        width:  100%;
        box-shadow:  0px 10px 2px #ccc;
        
     }
     .productitem  img{
        width:  100%;
        height: auto;
        display: block;
     }

     .productitem h3{
      font-size: 15px;
      padding: 10px 0px ;
      background-color: yellow;
      text-align: center;
      
     }
     .prisecart{
      display: flex;
      justify-content: space-between;
      padding: 10px;
     }
    </style>
</head>
<body>
    <section class="productSection">
           <h1>Our Products</h1>
           <div class="productRow">
            <aside>
                <h2>Categoro List</h2>
                <ul>
                    <!-- <li>Category 1</li> -->
                </ul>
            </aside>
                 <div class="productList">
                    <h2>Product </h2>
                    <div class="products">
                     

                    </div>

                 </div>
           </div>
     </section>
 
</body>
<script>

    // async await

    // let getProductes=async()=>{
    //   let firstresponse=await  fetch(`https://dummyjson.com/products`)
    //              let finalRes = await firstresponse.json()
    //              console.log('ðŸš€ ~ finalRes:', finalRes.products);
      
      
    // }
    // getProductes()






    let productsElement = document.querySelector(".products") 
    let categoryElement = document.querySelector("aside ul");
    let currentslug
    // .then .catch

       let getProductes=( catSlug='')=>{

         let apiUrl;
         if(catSlug===''){
            apiUrl='https://dummyjson.com/products'
         }
         else{
apiUrl = `https://dummyjson.com/products/category/${catSlug}`
         }
      fetch(apiUrl)
      .then((res,rej)=>res.json())
      .then((finalRes)=>{
        let {products}=finalRes
        let productList=''
        products.forEach((object,index)=>{
         productList+=`<div class="productitem">
                     <img src="${object.thumbnail}">
                     <h3>${object.title}</h3>
                     <div class="prisecart">
                       <b>${object.price}</b>
                       <button>Add To Cart</button>
                     </div>
                   </div>      
         `         
        })
        productsElement.innerHTML=productList


     console.log(products)        
      })     
      
    }
    getProductes()

     let getCategory =()=>{
        fetch (`https://dummyjson.com/products/categories`)
        .then(res=>res.json())
        .then((finalResponse)=>{

         let catlist='';
         finalResponse.forEach(eleement=>{
            // console.log('ðŸš€ ~ eleement:', eleement);
catlist += `<li style="background:${eleement.slug==currentslug ? 'red' : ''}" data-slug="${eleement.slug}">${eleement.name}</li>`
            
         })

         categoryElement.innerHTML=catlist

        })
     }

     getCategory()

    categoryElement.addEventListener("click",(e)=>{
      if(e.target.tagName=="LI"){
 currentslug = e.target.getAttribute('data-slug')
 


     
      getProductes(currentslug)
      getCategory()
      }
    })


</script>
</html>